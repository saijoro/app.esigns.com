function T(s,e){return typeof s=="function"?s(...e):!!s}function w(){}/*! js-cookie v3.0.5 | MIT */function u(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)s[i]=t[i]}return s}var l={read:function(s){return s[0]==='"'&&(s=s.slice(1,-1)),s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(s){return encodeURIComponent(s).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function f(s,e){function t(r,n,o){if(!(typeof document>"u")){o=u({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var c in o)o[c]&&(a+="; "+c,o[c]!==!0&&(a+="="+o[c].split(";")[0]));return document.cookie=r+"="+s.write(n,r)+a}}function i(r){if(!(typeof document>"u"||arguments.length&&!r)){for(var n=document.cookie?document.cookie.split("; "):[],o={},a=0;a<n.length;a++){var c=n[a].split("="),p=c.slice(1).join("=");try{var h=decodeURIComponent(c[0]);if(o[h]=s.read(p,h),r===h)break}catch{}}return r?o[r]:o}}return Object.create({set:t,get:i,remove:function(r,n){t(r,"",u({},n,{expires:-1}))},withAttributes:function(r){return f(this.converter,u({},this.attributes,r))},withConverter:function(r){return f(u({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(s)}})}var d=f(l,{path:"/"});const g=(s,e,t)=>t.map(r=>`${e}[]=${r}`).join("&"),y=(s,e)=>{let i=Object.keys(e).map(r=>{const n=e[r];return n&&n.length?Array.isArray(n)?g(e,r,n):`${r}=${e[r]}`:n?`${r}=${e[r]}`:""}).filter(r=>r.length).filter(r=>r).join("&");return i?s+"?"+i:s};class v{authStatusCodes=[401];authErrorURLs=["/auth/login","/auth/reset-password","/auth/forgot-password"];_fetchType;constructor(e="json"){this._fetchType=e}configureAuthorization(e){let t="Bearer ";t+=d.get("token"),e.headers.Authorization=t}setHeader(e){e.headers={}}setDefaultHeaders(e){e.headers={"Content-Type":"application/json"}}checkToLogOutOrNot(e){return this.authErrorURLs.some(t=>e.includes(t))}isAuthRequest(e){return this.authErrorURLs.includes(e)}async hit(...e){let[t,i]=e;this.setDefaultHeaders(i),this.isAuthRequest(t)||this.configureAuthorization(i);let r="https://dev-api.esigns.io/v1.0"+t;const n=await fetch(r,i);return n?.status==200||n?.status==201?this._fetchType=="response"?{success:!0,status:n.status,data:n}:{success:!0,status:n.status,data:await n.json()}:this.authStatusCodes.includes(n.status)&&!this.checkToLogOutOrNot(t)?(setTimeout(()=>{d.remove("token"),window.location.href="/"},1e3),{success:!1,status:n.status,data:await n.json()}):{status:n?.status,success:!1,data:await n.json()}}async post(e,t){return await this.hit(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async postFormData(e,t){return await this.hit(e,{method:"POST",body:t})}async get(e,t={}){return Object.keys(t).length&&(e=y(e,t)),await this.hit(e,{method:"GET"})}async delete(e,t={}){return this.hit(e,{method:"DELETE",body:JSON.stringify(t)})}async deleteWithOutPayload(e){return this.hit(e,{method:"DELETE"})}async put(e,t={}){return this.hit(e,{method:"PUT",body:JSON.stringify(t)})}async patch(e,t={}){return this.hit(e,{method:"PATCH",body:JSON.stringify(t)})}}const C=new v;export{C as $,d as a,w as n,T as s};
