import{B as v,k as b,r as N,j as e}from"./client-Bgb6eiQJ.js";import{B as w}from"./button-B3vbxScC.js";import{I as f}from"./index-Bi7O9J92.js";import{u as E,a as k,C as x,L as V,v as S}from"./auth-C5Uet0Gd.js";import{u as q}from"./useLocation-BZV1RsvC.js";import"./fetch-CAcI-nM1.js";import"./createLucideIcon-DdV2WPnr.js";const C=()=>{v();const c=b(),u=q(),o=new URLSearchParams(u.search),n=o.get("email")||"";o.get("company");const[h,m]=N.useState(!1),{control:d,handleSubmit:p,setError:r,formState:{errors:l},trigger:g}=E({}),{mutate:j,isError:L,error:P}=k({mutationFn:async a=>{try{m(!0);const t=await S(a);if(t?.status===200||t?.status===201)c.navigate({to:"/"});else if(t?.status===422){const s=t?.data?.errors?.details;s&&s.forEach(i=>{(i.type==="any.empty"||i.type==="any.required")&&r(i.key,{type:i.type,message:i.message})})}else if(t?.status==404){const s=t?.data?.message;s&&r("email",{type:"manual",message:s})}else if(t?.status==403){const s=t?.data?.message;s&&r("password",{type:"manual",message:s})}else throw t}catch(t){console.error(t)}finally{m(!1)}}}),y=async a=>{if(await g()){let s={...a,email:n};j(s)}};return e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("div",{className:"p-8 top-[100px] w-[400px]  absolute bg-white rounded-2xl shadow flex-col justify-center items-center gap-12 inline-flex border",children:[e.jsxs("div",{className:"self-stretch h-[71px] flex-col justify-start items-center gap-4 flex",children:[e.jsx("div",{className:"self-stretch text-center text-black text-[32px] font-normal leading-loose",children:"Emial Verification"}),e.jsx("div",{className:"self-stretch text-center text-[#333333] text-lg font-light leading-normal",children:"A Verfication mail has been sent to yout email account. please check your inbox to verify."})]}),e.jsx("hr",{}),e.jsx("div",{className:"self-stretch flex-col justify-start items-center gap-6 flex",children:e.jsx("form",{onSubmit:p(y),className:"self-stretch flex-col justify-start items-center gap-6 flex",children:e.jsxs("div",{className:"self-stretch h-[297px] flex-col justify-start items-start gap-12 flex",children:[e.jsxs("div",{className:"self-stretch h-[201px] flex-col justify-start items-start gap-6 flex",children:[e.jsxs("div",{className:"self-stretch h-[72px] flex-col justify-start items-start gap-1.5 flex",children:[e.jsx("div",{className:"self-stretch text-black text-sm font-normal leading-[18.20px]",children:"Email"}),e.jsx(x,{name:"email",rules:{required:"Email is required"},control:d,disabled:!0,defaultValue:n,render:({field:a})=>e.jsxs("div",{className:"w-full",children:[e.jsx(f,{...a,type:"email",placeholder:"Enter email",className:"h-12 px-4 py-3.5 bg-white rounded-lg border border-black/30"}),l.email&&e.jsx("div",{className:"text-red-500 text-sm mt-1 capitalize",children:l?.email?.message})]})})]}),e.jsxs("div",{className:"self-stretch h-[105px] flex-col justify-start items-start gap-1.5 flex",children:[e.jsx("div",{className:"self-stretch text-black text-sm font-normal leading-[18.20px]",children:"Verfication Code (OTP)"}),e.jsx("div",{className:"self-stretch h-[81px] flex-col justify-start items-start gap-3 flex",children:e.jsx(x,{name:"verification_code",control:d,rules:{required:"Verification code is required"},render:({field:a})=>e.jsxs("div",{className:"w-full relative",children:[e.jsx(f,{...a,type:"text",placeholder:"Enter verification code",className:"h-12 px-4 py-3.5 bg-white rounded-lg border border-black/30 w-full"}),l.verification_code&&e.jsx("div",{className:"text-red-500 text-sm mt-1 capitalize",children:l?.verification_code?.message})]})})})]})]}),e.jsx(w,{type:"submit",className:"text-black h-12 px-2.5 py-3.5 bg-[#2f80ed] rounded-lg text-base font-medium leading-tight w-full",children:h?e.jsx(V,{className:"mr-2 h-5 w-5 animate-spin"}):"Verify"})]})})})]})})},A=function(){return e.jsx(C,{})};export{A as component};
