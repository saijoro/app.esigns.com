import{jsx as e,jsxs as a}from"react/jsx-runtime";import{B as w}from"./button-cyuXPM3g.js";import{I as f}from"./input-BNpTjTIy.js";import{useMutation as k}from"@tanstack/react-query";import{useNavigate as j,useRouter as E}from"@tanstack/react-router";import S from"js-cookie";import{l as C}from"./auth-B0wetoCf.js";import{useForm as I,Controller as p}from"react-hook-form";import{Eye as P,EyeOff as D,Loader2 as F}from"lucide-react";import{useState as x}from"react";import"@radix-ui/react-slot";import"class-variance-authority";import"clsx";import"tailwind-merge";import"./fetch-DqQ3Y-nf.js";const L=()=>{const c=j({from:"/"}),h=E(),{control:m,handleSubmit:u,setError:o,formState:{errors:i}}=I({}),[n,g]=x(!1),[y,d]=x(!1),{mutate:b,isError:_,error:V}=k({mutationFn:async r=>{try{d(!0);const t=await C(r);if(t?.status===200||t?.status===201){const{data:s}=t?.data,l=new Date(s?.access_token_expires_at);S.set("token",s.access_token,{priority:"High",expires:l}),c({to:"/"})}else if(t?.status===422){const s=t?.data?.errors?.details;s&&s.forEach(l=>{(l.type==="any.empty"||l.type==="any.required")&&o(l.key,{type:l.type,message:l.message})})}else if(t?.status==404){const s=t?.data?.message;s&&o("email",{type:"manual",message:s})}else if(t?.status==403){const s=t?.data?.message;s&&o("password",{type:"manual",message:s})}else throw t}catch(t){console.error(t)}finally{d(!1)}}}),N=r=>{b(r)},v=()=>{g(!n)};return e("div",{className:"flex justify-center items-center h-full",children:a("div",{className:"p-8 top-[100px] w-[400px]  absolute bg-white rounded-2xl shadow flex-col justify-center items-center gap-12 inline-flex border",children:[a("div",{className:"self-stretch h-[71px] flex-col justify-start items-center gap-4 flex",children:[e("div",{className:"self-stretch text-center text-black text-[32px] font-normal leading-loose",children:"Login"}),e("div",{className:"self-stretch text-center text-[#333333] text-lg font-light leading-normal",children:"Greetings! Kindly enter your credentials."})]}),e("div",{className:"self-stretch flex-col justify-start items-center gap-6 flex",children:e("form",{onSubmit:u(N),className:"self-stretch flex-col justify-start items-center gap-6 flex",children:a("div",{className:"self-stretch h-[297px] flex-col justify-start items-start gap-12 flex",children:[a("div",{className:"self-stretch h-[201px] flex-col justify-start items-start gap-6 flex",children:[a("div",{className:"self-stretch h-[72px] flex-col justify-start items-start gap-1.5 flex",children:[e("div",{className:"self-stretch text-black text-sm font-normal leading-[18.20px]",children:"Email"}),e(p,{name:"email",control:m,render:({field:r})=>a("div",{className:"w-full",children:[e(f,{...r,type:"email",placeholder:"Enter email",className:"h-12 px-4 py-3.5 bg-white rounded-lg border border-black/30"}),i.email&&e("div",{className:"text-red-500 text-sm mt-1 capitalize",children:i?.email?.message})]})})]}),a("div",{className:"self-stretch h-[105px] flex-col justify-start items-start gap-1.5 flex",children:[e("div",{className:"self-stretch text-black text-sm font-normal leading-[18.20px]",children:"Password"}),a("div",{className:"self-stretch h-[81px] flex-col justify-start items-start gap-3 flex",children:[e(p,{name:"password",control:m,render:({field:r})=>a("div",{className:"w-full relative",children:[e(f,{...r,type:n?"text":"password",placeholder:"Enter password",className:"h-12 px-4 py-3.5 bg-white rounded-lg border border-black/30 w-full"}),e("button",{type:"button",onClick:v,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-800",children:n?e(P,{}):e(D,{})}),i.password&&e("div",{className:"text-red-500 text-sm mt-1 capitalize",children:i?.password?.message})]})}),e("div",{className:"self-stretch text-right text-black text-base font-medium leading-tight",children:"Forgot Password ?"})]})]})]}),e(w,{type:"submit",className:"text-black h-12 px-2.5 py-3.5 bg-[#ffc900] rounded-lg text-base font-medium leading-tight w-full",children:y?e(F,{className:"mr-2 h-5 w-5 animate-spin"}):"Login"})]})})}),a("div",{className:"flex justify-center items-center gap-2",children:[a("div",{className:"text-center text-[#0d0d0d] text-base font-light",children:["New to eSigns?"," "]}),e("div",{className:"text-center text-[#2f80ed] text-base font-normal cursor-pointer",onClick:()=>h.navigate({to:"/signup"}),children:"Sign up here."})]})]})})},X=function(){return e(L,{})};export{X as component};
