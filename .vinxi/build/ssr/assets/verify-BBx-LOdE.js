import{jsx as e,jsxs as a}from"react/jsx-runtime";import{B as b}from"./button-cyuXPM3g.js";import{I as p}from"./input-BNpTjTIy.js";import{useMutation as N}from"@tanstack/react-query";import{useNavigate as w,useRouter as j,useLocation as E}from"@tanstack/react-router";import{Loader2 as V}from"lucide-react";import{useState as k}from"react";import{useForm as S,Controller as u}from"react-hook-form";import{v as q}from"./auth-B0wetoCf.js";import"@radix-ui/react-slot";import"class-variance-authority";import"clsx";import"tailwind-merge";import"./fetch-DqQ3Y-nf.js";import"js-cookie";const P=()=>{w({from:"/"});const c=j(),h=E(),n=new URLSearchParams(h.search),m=n.get("email")||"";n.get("company");const[x,f]=k(!1),{control:d,handleSubmit:g,setError:o,formState:{errors:l},trigger:y}=S({}),{mutate:v,isError:I,error:L}=N({mutationFn:async i=>{try{f(!0);const t=await q(i);if(t?.status===200||t?.status===201)c.navigate({to:"/"});else if(t?.status===422){const s=t?.data?.errors?.details;s&&s.forEach(r=>{(r.type==="any.empty"||r.type==="any.required")&&o(r.key,{type:r.type,message:r.message})})}else if(t?.status==404){const s=t?.data?.message;s&&o("email",{type:"manual",message:s})}else if(t?.status==403){const s=t?.data?.message;s&&o("password",{type:"manual",message:s})}else throw t}catch(t){console.error(t)}finally{f(!1)}}});return e("div",{className:"flex justify-center items-center h-full",children:a("div",{className:"p-8 top-[100px] w-[400px]  absolute bg-white rounded-2xl shadow flex-col justify-center items-center gap-12 inline-flex border",children:[a("div",{className:"self-stretch h-[71px] flex-col justify-start items-center gap-4 flex",children:[e("div",{className:"self-stretch text-center text-black text-[32px] font-normal leading-loose",children:"Emial Verification"}),e("div",{className:"self-stretch text-center text-[#333333] text-lg font-light leading-normal",children:"A Verfication mail has been sent to yout email account. please check your inbox to verify."})]}),e("hr",{}),e("div",{className:"self-stretch flex-col justify-start items-center gap-6 flex",children:e("form",{onSubmit:g(async i=>{if(await y()){let s={...i,email:m};v(s)}}),className:"self-stretch flex-col justify-start items-center gap-6 flex",children:a("div",{className:"self-stretch h-[297px] flex-col justify-start items-start gap-12 flex",children:[a("div",{className:"self-stretch h-[201px] flex-col justify-start items-start gap-6 flex",children:[a("div",{className:"self-stretch h-[72px] flex-col justify-start items-start gap-1.5 flex",children:[e("div",{className:"self-stretch text-black text-sm font-normal leading-[18.20px]",children:"Email"}),e(u,{name:"email",rules:{required:"Email is required"},control:d,disabled:!0,defaultValue:m,render:({field:i})=>a("div",{className:"w-full",children:[e(p,{...i,type:"email",placeholder:"Enter email",className:"h-12 px-4 py-3.5 bg-white rounded-lg border border-black/30"}),l.email&&e("div",{className:"text-red-500 text-sm mt-1 capitalize",children:l?.email?.message})]})})]}),a("div",{className:"self-stretch h-[105px] flex-col justify-start items-start gap-1.5 flex",children:[e("div",{className:"self-stretch text-black text-sm font-normal leading-[18.20px]",children:"Verfication Code (OTP)"}),e("div",{className:"self-stretch h-[81px] flex-col justify-start items-start gap-3 flex",children:e(u,{name:"verification_code",control:d,rules:{required:"Verification code is required"},render:({field:i})=>a("div",{className:"w-full relative",children:[e(p,{...i,type:"text",placeholder:"Enter verification code",className:"h-12 px-4 py-3.5 bg-white rounded-lg border border-black/30 w-full"}),l.verification_code&&e("div",{className:"text-red-500 text-sm mt-1 capitalize",children:l?.verification_code?.message})]})})})]})]}),e(b,{type:"submit",className:"text-black h-12 px-2.5 py-3.5 bg-[#2f80ed] rounded-lg text-base font-medium leading-tight w-full",children:x?e(V,{className:"mr-2 h-5 w-5 animate-spin"}):"Verify"})]})})})]})})},K=function(){return e(P,{})};export{K as component};
